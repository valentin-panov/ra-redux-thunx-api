(this["webpackJsonpra-hw"]=this["webpackJsonpra-hw"]||[]).push([[0],{81:function(e,t,n){},95:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(9),i=n.n(c),s=(n(81),n(54)),u=n(30),o=n(12),l=n(23),d=n(130),j=n(129),b=n(19),f=n(49),p=Object(f.b)({name:"serviceList",initialState:{items:[],status:"idle",editItem:null,filter:null},reducers:{put:function(e,t){e.items=t.payload},edit:function(e,t){e.editItem=t.payload},reset:function(e,t){e.editItem=null},setFilter:function(e,t){e.filter=t.payload},fetchStart:function(e,t){e.status="pending"},fetchSuccess:function(e,t){e.status="success"},fetchError:function(e,t){console.error(t.payload),e.status="error"}}}),h=p.actions,v=h.put,x=h.edit,O=h.reset,m=h.setFilter,g=h.fetchStart,y=h.fetchSuccess,w=h.fetchError,k=p.reducer,S=n(24),I=n.n(S),N=n(42),E=function(){return function(){var e=Object(N.a)(I.a.mark((function e(t,n){var r,a,c;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"GET",r=z,t(g()),e.prev=3,e.next=6,fetch(r,{method:"GET",headers:new Headers({"content-type":"application/json"})});case 6:if((a=e.sent).ok&&a.status.toString().startsWith("2")){e.next=9;break}throw new Error(a.statusText);case 9:if(200!==a.status){e.next=15;break}return e.next=12,a.json();case 12:e.t0=e.sent,e.next=16;break;case 15:e.t0=null;case 16:c=e.t0,t(v(c)),t(y()),e.next=24;break;case 21:e.prev=21,e.t1=e.catch(3),t(w(e.t1));case 24:case"end":return e.stop()}}),e,null,[[3,21]])})));return function(t,n){return e.apply(this,arguments)}}()},T=function(e){return function(){var t=Object(N.a)(I.a.mark((function t(n,r){var a,c;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e&&e.name&&e.price&&e.content){t.next=2;break}return t.abrupt("return");case 2:return"POST",a=z,n(g()),t.prev=5,t.next=8,fetch(a,{method:"POST",headers:new Headers({"content-type":"application/json"}),body:JSON.stringify(e)});case 8:if((c=t.sent).ok&&c.status.toString().startsWith("2")){t.next=11;break}throw new Error(c.statusText);case 11:n(y()),n(E()),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(5),n(w(t.t0));case 18:case"end":return t.stop()}}),t,null,[[5,15]])})));return function(e,n){return t.apply(this,arguments)}}()},C=n(61),F=n(3);function L(){return Object(F.jsx)("div",{style:{margin:"0.5vmin"},children:Object(F.jsx)(C.TailSpin,{})})}var D=n(124),W=n(131),_=Object(D.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}}}}));function H(){var e=_();return Object(F.jsx)("div",{className:e.root+" shadow",style:{margin:"0.5vmin"},children:Object(F.jsx)(W.a,{variant:"filled",severity:"error",children:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430!"})})}function P(e){var t=e.match,n=Object(o.g)(),a=Object(b.b)(),c=Object(b.c)((function(e){return e.serviceList})),i=Object(r.useState)(t.params.id),s=Object(l.a)(i,2),f=s[0],p=s[1],h=Object(r.useState)(""),v=Object(l.a)(h,2),m=v[0],k=v[1],S=Object(r.useState)(""),E=Object(l.a)(S,2),C=E[0],D=E[1],W=Object(r.useState)(""),_=Object(l.a)(W,2),P=_[0],G=_[1],J=c.status,B=function(){k(""),D(""),p(""),G(""),a(O())};return Object(r.useEffect)((function(){c.editItem?(p(c.editItem.id),k(c.editItem.name),D(c.editItem.price),G(c.editItem.content)):(k(""),D(""),p(0),G(""))}),[c.editItem]),Object(r.useEffect)((function(){var e;a((e={id:f},function(){var t=Object(N.a)(I.a.mark((function t(n,r){var a,c,i;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.id){t.next=2;break}return t.abrupt("return");case 2:return a=z+"/".concat(e.id),n(g()),t.prev=5,t.next=8,fetch(a,{method:"GET",headers:new Headers({"content-type":"application/json"})});case 8:if((c=t.sent).ok&&c.status.toString().startsWith("2")){t.next=11;break}throw new Error(c.statusText);case 11:if(200!==c.status){t.next=17;break}return t.next=14,c.json();case 14:t.t0=t.sent,t.next=18;break;case 17:t.t0=null;case 18:i=t.t0,n(x(i)),n(y()),t.next=26;break;case 23:t.prev=23,t.t1=t.catch(5),n(w(t.t1));case 26:case"end":return t.stop()}}),t,null,[[5,23]])})));return function(e,n){return t.apply(this,arguments)}}()))}),[]),Object(F.jsxs)(F.Fragment,{children:["pending"===J&&Object(F.jsx)(L,{}),"error"===J&&Object(F.jsx)(H,{}),Object(F.jsx)("div",{className:"card",children:Object(F.jsxs)("form",{className:"new-post-input",noValidate:!0,autoComplete:"off",onSubmit:function(e){!function(e){var t=e.event,r=e.payload;t.preventDefault(),a(T(r)),B(),n.push("/")}({event:e,payload:{id:f,name:m,price:C,content:P}})},children:[Object(F.jsxs)("div",{className:"input-holder",children:[Object(F.jsx)(d.a,{value:m,onInput:function(e){return k(e.target.value)},id:"name",label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",variant:"outlined",className:"inputField"}),Object(F.jsx)(d.a,{value:C,onInput:function(e){return D(e.target.value)},id:"price",label:"\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c",variant:"outlined",className:"inputField"}),Object(F.jsx)(d.a,{value:P,onInput:function(e){return G(e.target.value)},id:"content",label:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",variant:"outlined",className:"inputField"})]}),Object(F.jsxs)("div",{className:"btn-holder",children:[Object(F.jsx)(u.b,{to:"/",style:{display:"flex",textDecoration:"none"},children:Object(F.jsx)(j.a,{variant:"contained",color:"secondary",onClick:function(){return B()},children:"Cancel"})}),Object(F.jsx)(j.a,{variant:"contained",color:"primary",type:"submit",children:"Save"})]})]})})]})}function G(){var e=Object(o.g)(),t=Object(b.b)(),n=Object(b.c)((function(e){return e.serviceList})),a=Object(r.useState)(0),c=Object(l.a)(a,2),i=c[0],s=c[1],u=Object(r.useState)(""),f=Object(l.a)(u,2),p=f[0],h=f[1],v=Object(r.useState)(""),x=Object(l.a)(v,2),g=x[0],y=x[1],w=function(){h(""),y(""),s(0),t(O()),e.push("/")};return Object(r.useEffect)((function(){n.editItem?(h(n.editItem.name),y(n.editItem.price),s(n.editItem.id)):(h(""),y(""),s(0))}),[n.editItem]),Object(r.useEffect)((function(){t(m({name:p,price:g}))}),[t,p,g]),Object(F.jsx)("div",{className:"card",children:Object(F.jsxs)("form",{className:"filter-input",noValidate:!0,autoComplete:"off",onSubmit:function(n){!function(n){var r=n.event,a=n.payload;r.preventDefault(),t(T(a)),w(),e.push("/")}({event:n,payload:{id:i,name:p,price:g,content:"\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"}})},children:[Object(F.jsxs)("div",{className:"input-holder",children:[Object(F.jsx)(d.a,{value:p,onInput:function(e){return h(e.target.value)},id:"name",label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",variant:"outlined",style:{width:"50%"}}),Object(F.jsx)(d.a,{value:g,onInput:function(e){return y(e.target.value)},id:"price",label:"\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c",variant:"outlined",style:{width:"50%"}})]}),Object(F.jsxs)("div",{className:"btn-holder",children:[Object(F.jsx)(j.a,{variant:"contained",color:"primary",type:"submit",children:"Save"}),(p||g)&&Object(F.jsx)(j.a,{variant:"contained",color:"secondary",onClick:function(){return w()},children:"Cancel"})]})]})})}var J=n(67),B=n.n(J),V=n(66),M=n.n(V);function q(){var e=Object(b.b)(),t=Object(b.c)((function(e){return e.serviceList})),n=t.items,a=t.status,c=t.filter;Object(r.useEffect)((function(){e(E())}),[e]),c&&(n=n.filter((function(e){return e.name.toLowerCase().includes(c.name.toLowerCase())})).filter((function(e){return e.price.toString().startsWith(c.price)})));var i=function(t){var n;e((n={id:t},function(){var e=Object(N.a)(I.a.mark((function e(t,r){var a,c;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return a=z+"/".concat(n.id),t(g()),e.prev=5,e.next=8,fetch(a,{method:"DELETE",headers:new Headers({"content-type":"application/json"})});case 8:if((c=e.sent).ok&&c.status.toString().startsWith("2")){e.next=11;break}throw new Error(c.statusText);case 11:t(y()),t(E()),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),t(w(e.t0));case 18:case"end":return e.stop()}}),e,null,[[5,15]])})));return function(t,n){return e.apply(this,arguments)}}()))};return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(G,{}),"pending"===a&&Object(F.jsx)(L,{}),"error"===a&&Object(F.jsx)(H,{}),"success"===a&&n.length>0&&Object(F.jsx)("ul",{className:"card",children:n.map((function(e){return Object(F.jsxs)("li",{className:"card_item","data-id":e.id,children:[Object(F.jsx)("span",{className:"card_item-name",children:e.name}),Object(F.jsx)("span",{className:"card_item-price",children:e.price}),Object(F.jsx)(u.b,{to:"/services/".concat(e.id),style:{display:"flex"},children:Object(F.jsx)(M.a,{className:"icon"})}),Object(F.jsx)(B.a,{className:"icon",onClick:function(){return i(e.id)}})]},e.id)}))})]})}var z="https://ra-thunk-redux-back.herokuapp.com/api/services";function A(){return Object(F.jsxs)(u.a,{basename:"/ra-redux-thunx-api",children:[Object(F.jsx)(o.b,{exact:!0,path:"/",children:Object(F.jsx)(o.a,{to:"/services"})}),Object(F.jsx)("div",{className:"wrapper>",children:Object(F.jsx)("div",{className:"container",children:Object(F.jsxs)(o.d,{children:[Object(F.jsx)(o.b,{path:"/services",exact:!0,render:function(e){return Object(F.jsx)(q,Object(s.a)({},e))}}),Object(F.jsx)(o.b,{path:"/services/:id",exact:!0,render:function(e){return Object(F.jsx)(P,Object(s.a)({},e))}})]})})})]})}var K=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,133)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),c(e),i(e)}))},Q=n(39),R=function(e){return function(t){return function(n){console.log("dispatchin",n),console.log("prev_state",e.getState());var r=t(n);return console.log("next_state",e.getState()),r}}},U=Object(f.a)({reducer:{serviceList:k},middleware:function(e){return e().concat(Q.a,R)}});i.a.render(Object(F.jsx)(a.a.StrictMode,{children:Object(F.jsx)(b.a,{store:U,children:Object(F.jsx)(A,{})})}),document.getElementById("root")),K()}},[[95,1,2]]]);
//# sourceMappingURL=main.51d99275.chunk.js.map